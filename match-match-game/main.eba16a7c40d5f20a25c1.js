(()=>{"use strict";var e={764:(e,t,n)=>{n.r(t)},430:(e,t,n)=>{n.r(t)},248:(e,t,n)=>{n.r(t)},594:(e,t,n)=>{n.r(t)},362:(e,t,n)=>{n.r(t)},987:(e,t,n)=>{n.r(t)},819:(e,t,n)=>{n.r(t)},953:(e,t,n)=>{n.r(t)},827:(e,t,n)=>{n.r(t)},763:(e,t,n)=>{n.r(t)},863:(e,t,n)=>{n.r(t)},978:(e,t,n)=>{n.r(t)},115:(e,t,n)=>{n.r(t)},785:(e,t,n)=>{n.r(t)},808:(e,t,n)=>{n.r(t)},788:(e,t,n)=>{n.r(t)},818:(e,t,n)=>{n.r(t)},996:(e,t,n)=>{n.r(t)},352:(e,t,n)=>{n.r(t)},563:(e,t,n)=>{n.r(t)},279:(e,t,n)=>{n.r(t)},752:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=n(229),o=n(366),a=n(817),r=n(101);t.App=class{constructor(e){this.rootElement=e,this.header=new o.Header,this.registerForm=new a.RegisterForm,this.game=new i.Game,this.cover=new r.Cover,this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.game.element),this.rootElement.appendChild(this.registerForm.element),this.rootElement.appendChild(this.cover.element)}start(){return s(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[0],n=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(n)}))}}},981:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BestScore=void 0;const s=n(583);n(764);class i extends s.BaseComponent{constructor(){super("div",["best-score"]),this.element.innerHTML="\n    <h1>Best players</h1>\n    "}}t.BestScore=i},226:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AboutGame=void 0;const s=n(583);n(430);class i extends s.BaseComponent{constructor(){super("div",["about-game"]),this.element.innerHTML='\n    <div class="block-wrapper">\n    <div class="top-blocks">\n      <div class="block">\n        <p class="block__text">\n          1) Register new player in game\n        </p>\n      </div>\n      <div class="block register-img">\n      </div>\n    </div>\n    <div class="middle-blocks">\n      <div class="block">\n        <p class="block-text">2) Configure your game settings</p>\n      </div>\n      <div class="block settings-img">\n      </div>\n    </div>\n    <div class="bottom-blocks">\n      <div class="block">\n        <p class="block-text">\n          3) Start you new game! Remember card positions and match it before times up.\n        </p>\n      </div>\n      <div class="block game-img">\n      </div>\n    </div>\n  </div>\n    '}}t.AboutGame=i},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},954:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddButton=void 0;const s=n(870),i=n(848);n(248);class o extends i.FormButton{constructor(e,t,n){super("add user",["add-button"]),this.changeInput=(e,t,n)=>{e.oninput=()=>{this.validate(e.value,t.value,n.value),this.addClass(e,this.validateName)},t.oninput=()=>{this.validate(e.value,t.value,n.value),this.addClass(t,this.validateName)},n.oninput=()=>{this.validate(e.value,t.value,n.value),this.addClass(n,this.validateEmail)}},this.validate=(e,t,n)=>this.validateName(e)&&this.validateName(t)&&this.validateEmail(n)?(this.element.classList.add("box-shadow"),!0):(this.element.classList.remove("box-shadow"),!1),this.validateName=e=>/^([a-zа-яё]+)$/i.test(e)&&e.length<30,this.validateEmail=e=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/gim.test(e)&&e.length<30,this.addClass=(e,t)=>{t(e.value)?(e.classList.add("input_success"),e.classList.remove("input_error")):(e.classList.remove("input_success"),e.classList.add("input_error"))},this.changeHeaderButton=()=>{document.querySelector(".register-button").classList.add("hidden"),document.querySelector(".start-button").classList.remove("hidden")},this.validateReport=(e,t)=>{e.classList.add("input_error"),e.value?"email"===t?e.setCustomValidity("Email address must contain @"):e.setCustomValidity(`The ${t} must be only letters and no longer than 30 characters`):e.setCustomValidity(`Enter your ${t}`),setTimeout((()=>{e.setCustomValidity("")}),3e3),e.reportValidity()},this.name=e,this.surname=t,this.email=n,this.changeInput(e,t,n)}buttonHandler(){super.buttonHandler(),this.validate(this.name.value,this.surname.value,this.email.value)?(s.indexdb(this.name.value,this.surname.value,this.email.value),this.clearInput(),this.hiddenForm(),this.changeHeaderButton()):(this.validateName(this.name.value)||this.validateReport(this.name,"name"),this.validateName(this.surname.value)||this.validateReport(this.surname,"surname"),this.validateEmail(this.email.value)||this.validateReport(this.email,"email"))}}t.AddButton=o},113:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;const s=n(583);n(594);class i extends s.BaseComponent{constructor(e,t=[]){super("button",["button","box-shadow"]),this.element.innerHTML=`\n  <p class='button__text'>${e}</p>\n  `,this.element.classList.add(...t),this.element.addEventListener("click",(e=>{e.preventDefault(),this.buttonHandler()}))}buttonHandler(){this.element}}t.Button=i},806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelButton=void 0;const s=n(848);n(362);class i extends s.FormButton{constructor(){super("cancel",["cancel-button"])}buttonHandler(){super.buttonHandler(),this.hiddenForm(),this.clearInput()}}t.CancelButton=i},848:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormButton=void 0;const s=n(113);class i extends s.Button{constructor(){super(...arguments),this.clearInput=()=>{document.getElementById("name").value="",document.getElementById("name").classList.remove("input_success","input_error"),document.getElementById("surname").value="",document.getElementById("surname").classList.remove("input_success","input_error"),document.getElementById("email").value="",document.getElementById("email").classList.remove("input_success","input_error")},this.hiddenForm=()=>{const e=document.querySelector(".cover"),t=document.querySelector(".register-form");e.classList.add("hidden"),t.classList.add("hidden")}}}t.FormButton=i},465:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterButton=void 0;const s=n(113);n(987);class i extends s.Button{constructor(){super("register new player",["register-button"])}buttonHandler(){super.buttonHandler();const e=document.querySelector(".cover"),t=document.querySelector(".register-form");e.classList.remove("hidden"),t.classList.remove("hidden")}}t.RegisterButton=i},290:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StartButton=void 0;const s=n(113);n(819);class i extends s.Button{constructor(){super("start game",["start-button","hidden"])}}t.StartButton=i},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(953);const s=n(583);class i extends s.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n      <div class="card">\n        <div class="card__front" style="background-image: url('./images/${e}')"></div>\n        <div class="card__back"></div>\n      </div>\n    `}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=i},101:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cover=void 0;const s=n(583);n(827);class i extends s.BaseComponent{constructor(){super("div",["cover","hidden"]),this.hide=()=>{const e=document.querySelector(".cover"),t=document.querySelector(".register-form");e.classList.add("hidden"),t.classList.add("hidden")},this.element.addEventListener("click",(()=>this.hide()))}}t.Cover=i},249:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,n(763);const s=n(583),i=n(310);class o extends s.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e.slice(0,i.settings.complexity),this.cards.forEach((e=>this.element.appendChild(e.element))),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),1e3*i.settings.SHOW_TIME)}}t.CardsField=o},286:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameSettings=void 0;const s=n(583);n(863);class i extends s.BaseComponent{constructor(){super("div",["game-settings"]),this.element.innerHTML="\n    <h1>Game settings</h1>\n    "}}t.GameSettings=i},229:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const i=n(680),o=n(583),a=n(977),r=n(249),l=n(610);n(978);const d=n(310);class c extends o.BaseComponent{constructor(){super("main",["wrapper"]),this.isAnimation=!1,this.cardsField=new r.CardsField,this.timer=new l.Timer,this.element.appendChild(this.timer.element),this.element.appendChild(this.cardsField.element)}newGame(e){this.cardsField.clear();const t=e.concat(e).map((e=>new a.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(t),this.timer.timerInterval(d.settings.SHOW_TIME)}cardHandler(e){return s(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.activeCard)return this.activeCard=e,void(this.isAnimation=!1);this.activeCard.image!==e.image&&(yield i.delay(d.settings.FLIP_DELAY),yield Promise.all([this.activeCard.flipToBack(),e.flipToBack()])),this.activeCard=void 0,this.isAnimation=!1}}))}}t.Game=c},366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,n(115);const s=n(583),i=n(185),o=n(122),a=n(465),r=n(290);class l extends s.BaseComponent{constructor(){super("header",["header"]),this.logo=new i.Logo,this.nav=new o.Nav,this.registerButton=new a.RegisterButton,this.startButton=new r.StartButton,this.element.appendChild(this.logo.element),this.element.appendChild(this.nav.element),this.element.appendChild(this.registerButton.element),this.element.appendChild(this.startButton.element)}}t.Header=l},69:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const s=n(583);n(785);class i extends s.BaseComponent{constructor(e,t,n){super("input",["input"]),this.element.type=e,this.element.placeholder=t,this.element.id=n}}t.Input=i},880:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;const s=n(583);n(808);class i extends s.BaseComponent{constructor(e,t){super("label",["label"]),this.element.htmlFor=e,this.element.innerHTML=`${t}`}}t.Label=i},185:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;const s=n(583);n(788);class i extends s.BaseComponent{constructor(){super("div",["logo-wrap"]),this.element.innerHTML='\n    <a class="logo-link" href=#>\n    <div class="logo__top">Match</div>\n    <div class="logo__bottom">Match</div>\n    </a>\n    '}}t.Logo=i},122:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Nav=void 0;const s=n(583);n(818);class i extends s.BaseComponent{constructor(){super("nav",["nav"]),this.element.innerHTML='\n    <ul class="nav__list">\n      <li class="nav__list-element">\n        <a href="#/about-game/" id="about-game" class="nav__list-link">About Game</a>\n      </li>\n      <li class="nav__list-element">\n        <a href="#/best-score/" id="best-score" class="nav__list-link">Best Score</a>\n      </li>\n      <li class="nav__list-element">\n        <a href="#/game-settings" id="game-settings" class="nav__list-link">Game Settings</p>\n        </a>\n      </li>\n    </ul>\n    '}}t.Nav=i},459:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormWrap=void 0;const s=n(583),i=n(954),o=n(806),a=n(69),r=n(880);n(996);class l extends s.BaseComponent{constructor(){super("form",["formWrap"]),this.labelName=new r.Label("name","First Name"),this.labelSurname=new r.Label("surname","Last Name"),this.labelEmail=new r.Label("email","Email"),this.inputName=new a.Input("text","...","name"),this.inputSurname=new a.Input("text","...","surname"),this.inputEmail=new a.Input("email","...","email"),this.buttonWrap=new s.BaseComponent("div",["button-wrap"]),this.addButton=new i.AddButton(this.inputName.element,this.inputSurname.element,this.inputEmail.element),this.cancelButton=new o.CancelButton,this.element.appendChild(this.labelName.element),this.element.appendChild(this.inputName.element),this.element.appendChild(this.labelSurname.element),this.element.appendChild(this.inputSurname.element),this.element.appendChild(this.labelEmail.element),this.element.appendChild(this.inputEmail.element),this.element.appendChild(this.buttonWrap.element),this.buttonWrap.element.appendChild(this.addButton.element),this.buttonWrap.element.appendChild(this.cancelButton.element),this.addButton.element.classList.remove("box-shadow")}}t.FormWrap=l},817:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterForm=void 0;const s=n(583),i=n(459);n(352);class o extends s.BaseComponent{constructor(){super("div",["register-form","hidden"]),this.formHeader=new s.BaseComponent("h1",["form__header"]),this.formWrap=new i.FormWrap,this.userWrap=new s.BaseComponent("div",["user-wrap"]),this.photoWrap=new s.BaseComponent("div",["photo-wrap"]),this.element.appendChild(this.formHeader.element),this.element.appendChild(this.userWrap.element),this.userWrap.element.appendChild(this.formWrap.element),this.userWrap.element.appendChild(this.photoWrap.element),this.formHeader.element.innerHTML="Register new Player"}}t.RegisterForm=o},610:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0,n(563);const s=n(583);class i extends s.BaseComponent{constructor(){super("div",["timer"]),this.timeCounter=0,this.element.innerHTML=`\n    <span id="timer">${this.timeCounter}</span>\n    `}countSecond(e){this.timeCounter++;const t=document.getElementById("timer");t&&(t.innerHTML=`${this.timeCounter}`,this.timeCounter>=e&&(this.timeCounter=0))}timerInterval(e){console.log(this);const t=setInterval((()=>{this.countSecond(e)}),1e3);this.timeCounter>=e&&clearInterval(t)}}t.Timer=i},870:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.indexdb=void 0,t.indexdb=function(e,t,n){const s=window.indexedDB.open("lenarFF",6);let i;s.onupgradeneeded=function(e){i=e.target.result,i.createObjectStore("notes",{autoIncrement:!0})},s.onerror=function(e){e.target&&console.log(`error indexDB${e.target.error.name}`)},s.onsuccess=function(e){console.log("success indexDB"),e.target&&(i=s.result)},s.onsuccess=s=>{i=s.target.result,((e,t,n,s)=>{const i=e.transaction(["notes"],"readwrite"),o={userName:t,userSurname:n,userEmail:s};i.objectStore("notes").add(o),i.oncomplete=()=>{console.log("stored note!")},i.onerror=()=>{alert("error storing note ")}})(i,e,t,n)}}},73:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PreApp=void 0;const i=n(229);t.PreApp=class{constructor(e){this.rootElement=e,this.game=new i.Game}start(){return s(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[0],n=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(n)}))}}},310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0,t.settings={complexity:12,FLIP_DELAY:1e3,SHOW_TIME:3}},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(279);const e=n(752),t=n(226),s=n(981),i=n(286),o=n(610),a=n(229),r=n(73),l=new t.AboutGame,d=new s.BestScore,c=new i.GameSettings,u=(new o.Timer,new a.Game);window.addEventListener("load",(()=>{console.log(window.location.hash)})),window.onload=()=>{var t;const n=document.getElementById("app");if(!n)throw Error("App root element not found");if(new e.App(n).start(),window.location){const e=document.querySelectorAll(".nav__list-link");if(null===(t=document.querySelector(".start-button"))||void 0===t||t.addEventListener("click",(()=>{"#"!==window.location.hash&&(window.location.hash="#")})),!e)throw Error("navEl element not found");window.addEventListener("hashchange",(()=>{console.log(window.location.hash),(e=>{console.log(window.location.hash);const t=document.querySelector(".wrapper");if(!t)throw Error("wrap root element not found");switch(t.innerHTML="",e){case"#/about-game/":t.append(l.element);break;case"#/best-score/":t.append(d.element);break;case"#/game-settings":t.append(c.element);break;case"#":console.log("hello #");break;default:t.append(u.timer.element),t.append(u.cardsField.element),console.log("hello #"),new r.PreApp(n).start()}})(window.location.hash)}))}}})()})();